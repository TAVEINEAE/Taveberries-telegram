<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Taveberries ‚Äî –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å</title>
  
  <!-- Telegram Web App —Å–∫—Ä–∏–ø—Ç –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  
  <style>
    :root {
      --tg-theme-bg-color: #ffffff;
      --tg-theme-text-color: #000000;
      --tg-theme-hint-color: #999999;
      --tg-theme-button-color: #7b4eff;     /* —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π –∫–∞–∫ —É WB */
      --tg-theme-button-text-color: #ffffff;
      --accent: #7b4eff;
      --accent-dark: #5a3acc;
      --gray: #f5f5f5;
      --light-gray: #e0e0e0;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--tg-theme-bg-color);
      color: var(--tg-theme-text-color);
      min-height: 100vh;
      padding-bottom: 80px; /* –º–µ—Å—Ç–æ –ø–æ–¥ –Ω–∏–∂–Ω–µ–µ –º–µ–Ω—é */
    }

    /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Ç–µ–º—É Telegram (—Ç–µ–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è) */
    @media (prefers-color-scheme: dark) {
      :root {
        --tg-theme-bg-color: #0f0f0f;
        --tg-theme-text-color: #ffffff;
        --gray: #1a1a1a;
        --light-gray: #2a2a2a;
      }
    }

    header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 50px;
      background: var(--tg-theme-bg-color);
      border-bottom: 1px solid var(--light-gray);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 16px;
      z-index: 1000;
      font-weight: 600;
    }

    .logo {
      font-size: 20px;
      color: var(--accent);
    }

    .search-bar {
      margin: 60px 16px 16px;
      position: relative;
    }

    .search-bar input {
      width: 100%;
      padding: 12px 16px 12px 40px;
      border: 1px solid var(--light-gray);
      border-radius: 12px;
      font-size: 16px;
      background: var(--gray);
    }

    .search-bar::before {
      content: "üîç";
      position: absolute;
      left: 14px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--tg-theme-hint-color);
    }

    .promo {
      margin: 0 16px 24px;
      height: 160px;
      background: linear-gradient(135deg, #7b4eff, #c066ff);
      border-radius: 16px;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: bold;
      text-align: center;
      overflow: hidden;
      position: relative;
    }

    .promo::after {
      content: "–ê–ö–¶–ò–Ø –¥–æ -70%";
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(0,0,0,0.3);
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 14px;
    }

    .section-title {
      padding: 0 16px;
      margin: 24px 0 12px;
      font-size: 18px;
      font-weight: 600;
    }

    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 12px;
      padding: 0 16px;
    }

    .product-card {
      background: var(--tg-theme-bg-color);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      transition: transform 0.15s;
    }

    .product-card:active {
      transform: scale(0.98);
    }

    .product-img {
      width: 100%;
      aspect-ratio: 1 / 1.2;
      object-fit: cover;
      background: #f0f0f0;
    }

    .product-info {
      padding: 10px;
    }

    .product-title {
      font-size: 14px;
      line-height: 1.4;
      height: 40px;
      overflow: hidden;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
    }

    .product-price {
      margin-top: 6px;
      font-weight: 700;
      color: var(--accent);
      font-size: 16px;
    }

    .product-old-price {
      color: var(--tg-theme-hint-color);
      text-decoration: line-through;
      font-size: 13px;
      margin-left: 8px;
    }

    .add-btn {
      margin-top: 8px;
      background: var(--accent);
      color: white;
      border: none;
      width: 100%;
      padding: 8px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
    }

    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: 60px;
      background: var(--tg-theme-bg-color);
      border-top: 1px solid var(--light-gray);
      display: flex;
      justify-content: space-around;
      align-items: center;
      z-index: 1000;
    }

    .nav-item {
      text-align: center;
      color: var(--tg-theme-hint-color);
      font-size: 12px;
    }

    .nav-item.active {
      color: var(--accent);
    }

    .cart-badge {
      background: var(--accent);
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      font-size: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: absolute;
      top: -6px;
      right: -6px;
    }
  </style>
</head>
<body>

  <header>
    <div class="logo">Taveberries</div>
    <div>üõí <span id="cart-count">0</span></div>
  </header>

  <div class="search-bar">
    <input type="text" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤, –±—É–∫–µ—Ç–æ–≤, –ø–æ–¥–∞—Ä–∫–æ–≤..." />
  </div>

  <div class="promo">
    –¶–≤–µ—Ç—ã –∏ –ø–æ–¥–∞—Ä–∫–∏ –æ—Ç 99 AED!<br>–î–æ—Å—Ç–∞–≤–∫–∞ —Å–µ–≥–æ–¥–Ω—è –ø–æ –ê–±—É-–î–∞–±–∏
  </div>

  <div class="section-title">–•–∏—Ç—ã –ø—Ä–æ–¥–∞–∂</div>
  <div class="products-grid" id="products">
    <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è JS-–æ–º -->
  </div>

  <div class="section-title">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</div>
  <div class="products-grid">
    <div class="product-card"><div class="product-img" style="background:#ffebee">–†–æ–∑—ã</div></div>
    <div class="product-card"><div class="product-img" style="background:#e8f5e9">–ë—É–∫–µ—Ç—ã –≤ –∫–æ—Ä–æ–±–∫–µ</div></div>
    <div class="product-card"><div class="product-img" style="background:#e3f2fd">–ü–æ–¥–∞—Ä–∫–∏</div></div>
    <div class="product-card"><div class="product-img" style="background:#fff3e0">–û—Ä—Ö–∏–¥–µ–∏</div></div>
  </div>

  <!-- –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é –∫–∞–∫ –≤ WB -->
  <div class="bottom-nav">
    <div class="nav-item active">–ì–ª–∞–≤–Ω–∞—è</div>
    <div class="nav-item">–ö–∞—Ç–∞–ª–æ–≥</div>
    <div class="nav-item" style="position:relative;">
      –ö–æ—Ä–∑–∏–Ω–∞
      <div class="cart-badge" id="cart-badge">0</div>
    </div>
    <div class="nav-item">–ü—Ä–æ—Ñ–∏–ª—å</div>
  </div>

  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Mini App
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand(); // –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω

    // –ü—Ä–∏–º–µ—Ä –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ —Ç–µ–º—ã (–µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Ç—ë–º–Ω–æ–π —Ç–µ–º–µ TG)
    if (tg.colorScheme === 'dark') {
      document.documentElement.style.setProperty('--tg-theme-bg-color', '#0f0f0f');
      document.documentElement.style.setProperty('--tg-theme-text-color', '#ffffff');
    }

    // –ü—Ä–æ—Å—Ç–∞—è –∫–æ—Ä–∑–∏–Ω–∞ (–ª–æ–∫–∞–ª—å–Ω–∞—è)
    let cart = [];
    const cartCountEl = document.getElementById('cart-count');
    const cartBadge = document.getElementById('cart-badge');

    function updateCart() {
      const count = cart.length;
      cartCountEl.textContent = count;
      cartBadge.textContent = count;
    }

    // –ü—Ä–∏–º–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤ (–ø–æ—Ç–æ–º –∑–∞–º–µ–Ω–∏—à—å –Ω–∞ —Å–≤–æ–∏ / —Å –±—ç–∫–µ–Ω–¥–∞)
    const products = [
      { id:1, name: "–ë—É–∫–µ—Ç 51 –∫—Ä–∞—Å–Ω–∞—è —Ä–æ–∑–∞", price: 399, oldPrice: 599, img: "https://images.unsplash.com/photo-1525310072745-f49212b5ac6d?w=400" },
      { id:2, name: "–†–æ–∑—ã –≤ –∫–æ—Ä–æ–±–∫–µ –º–∏–∫—Å", price: 249, oldPrice: 349, img: "https://images.unsplash.com/photo-1585487000160-6ebcfceb0d26?w=400" },
      { id:3, name: "–û—Ä—Ö–∏–¥–µ—è –≤ –≥–æ—Ä—à–∫–µ –ø—Ä–µ–º–∏—É–º", price: 179, img: "https://images.unsplash.com/photo-1610479577743-3e4d3c3c3e3c?w=400" },
      { id:4, name: "–ü–æ–¥–∞—Ä–æ—á–Ω—ã–π –Ω–∞–±–æ—Ä —Å –≤–∏–Ω–æ–º", price: 299, oldPrice: 399, img: "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=400" },
      { id:5, name: "–ë—É–∫–µ—Ç –ø–∏–æ–Ω–æ–≤ –Ω–µ–∂–Ω—ã–π", price: 449, img: "https://images.unsplash.com/photo-1526045478516-99145907023c?w=400" },
    ];

    const productsGrid = document.getElementById('products');

    products.forEach(p => {
      const card = document.createElement('div');
      card.className = 'product-card';
      card.innerHTML = `
        <img class="product-img" src="${p.img}" alt="${p.name}" loading="lazy">
        <div class="product-info">
          <div class="product-title">${p.name}</div>
          <div>
            <span class="product-price">${p.price} AED</span>
            ${p.oldPrice ? `<span class="product-old-price">${p.oldPrice} AED</span>` : ''}
          </div>
          <button class="add-btn" data-id="${p.id}">–í –∫–æ—Ä–∑–∏–Ω—É</button>
        </div>
      `;
      productsGrid.appendChild(card);
    });

    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É
    document.addEventListener('click', e => {
      if (e.target.classList.contains('add-btn')) {
        const id = +e.target.dataset.id;
        const product = products.find(p => p.id === id);
        if (product) {
          cart.push(product);
          updateCart();
          tg.showPopup({
            title: "–î–æ–±–∞–≤–ª–µ–Ω–æ!",
            message: `${product.name} –≤ –∫–æ—Ä–∑–∏–Ω–µ`,
            buttons: [{type:"ok"}]
          });
        }
      }
    });

    updateCart();

    // –ö–Ω–æ–ø–∫–∞ "–ì–ª–∞–≤–Ω–∞—è" Telegram (–µ—Å–ª–∏ —Ö–æ—á–µ—à—å)
    tg.MainButton.setText("–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑");
    tg.MainButton.setParams({color: "#7b4eff"});
    tg.MainButton.show();
    tg.MainButton.onClick(() => {
      if (cart.length === 0) {
        tg.showAlert("–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞");
      } else {
        tg.showPopup({
          title: "–ó–∞–∫–∞–∑",
          message: `–¢–æ–≤–∞—Ä–æ–≤: ${cart.length}\n–°—É–º–º–∞: ${cart.reduce((s,p)=>s+p.price,0)} AED\n–û—Ñ–æ—Ä–º–∏—Ç—å?`,
          buttons: [
            {type:"ok", text:"–î–∞, –æ–ø–ª–∞—Ç–∏—Ç—å"},
            {type:"cancel"}
          ]
        });
      }
    });
  </script>
</body>
</html>
